# Jira 테스트 케이스 생성기

Jira 이슈의 인수 조건(AC)을 분석하여 프론트엔드와 백엔드 테스트 케이스를 자동으로 생성하는 CLI 도구입니다.

## 🚀 기능

- **Jira 이슈 조회**: Jira API를 통해 이슈 정보 자동 가져오기
- **AI 기반 테스트 케이스 생성**: OpenAI GPT-4를 활용한 지능형 테스트 케이스 생성
- **포괄적 테스트 커버리지**: 프론트엔드(UI/UX) + 백엔드(Positive/Negative) 테스트 케이스
- **마크다운 출력**: 깔끔한 마크다운 형식으로 결과 출력
- **반복 실행**: 여러 이슈를 연속으로 처리 가능

## 📋 요구사항

- Node.js 18+ 
- Jira 계정 및 API 토큰
- OpenAI API 키

## 🛠️ 설치

1. **저장소 클론**
   ```bash
   git clone <repository-url>
   cd jira-smithery
   ```

2. **의존성 설치**
   ```bash
   npm install
   ```

3. **설정 파일 생성**
   ```bash
   cp config.json.example config.json
   ```

4. **설정 파일 편집**
   ```json
   {
     "jira": {
       "baseUrl": "https://your-domain.atlassian.net",
       "username": "your-email@example.com",
       "apiToken": "your-jira-api-token"
     },
     "openai": {
       "apiKey": "your-openai-api-key"
     }
   }
   ```

## 🚀 사용법

### 간단한 실행
```bash
./run-cli.sh
```

### 수동 실행
```bash
# TypeScript 컴파일
npx tsc --project tsconfig.server.json

# CLI 실행
node dist/cli.js
```

### 사용 예시
```
🚀 Jira 테스트 케이스 생성기
==================================================
📋 Jira URL: https://your-domain.atlassian.net
👤 사용자: your-email@example.com

🔑 Jira 이슈 키를 입력하세요 (예: AUT-123, 종료하려면 q): AUT-456

🔍 Jira 이슈를 조회 중... (AUT-456)
✅ 이슈 조회 완료
🤖 테스트케이스 생성 중... (LLM 호출)

============================================================
📝 생성된 테스트케이스 (마크다운)
============================================================
## 프론트엔드 테스트 케이스
### 1. 로그인 폼 검증
- **목적**: 사용자가 올바른 정보로 로그인할 수 있는지 확인
- **조건**: 로그인 페이지가 열려있음
- **단계**: 
  1. 사용자명 입력
  2. 비밀번호 입력
  3. 로그인 버튼 클릭
- **예상 결과**: 성공적으로 로그인되어 메인 페이지로 이동

## 백엔드 테스트 케이스
### Positive 케이스
- 유효한 사용자명/비밀번호로 로그인 시도
- 올바른 응답 코드(200) 반환
- 사용자 세션 생성

### Negative 케이스
- 잘못된 비밀번호로 로그인 시도
- 존재하지 않는 사용자명으로 로그인 시도
- 빈 필드로 로그인 시도
============================================================
```

## 사용 결과

```bash
$ ./run-cli.sh
🔨 TypeScript 컴파일 중...
✅ 컴파일 완료
🚀 CLI 실행 중...

🚀 Jira 테스트 케이스 생성기
==================================================
📋 Jira URL: https://kautotest.atlassian.net
👤 사용자: djadbwjd0403@gmail.com

🔍 도메인: kautotest
📋 사용 가능한 이슈들을 확인 중...
🔍 프로젝트 이슈 조회: https://kautotest.atlassian.net/rest/api/2/search?jql=project=AUT&maxResults=50
✅ 프로젝트 조회 성공: 2개 이슈 발견

📝 사용 가능한 이슈들:
  - AUT-4 (스토리): 고객조회결과
  - AUT-2 (에픽): 고객조회결과

🔑 Jira 이슈 키를 입력하세요 (예: AUT-123, 종료하려면 q): AUT-4

🔍 Jira 이슈를 조회 중... (AUT-4)
🔗 API URL: https://kautotest.atlassian.net/rest/api/2/issue/AUT-4
✅ API 응답 성공: 200
✅ 이슈 조회 완료
🤖 테스트케이스 생성 중... (LLM 호출)

============================================================
📝 생성된 테스트케이스 (마크다운)
============================================================
## 프론트엔드 테스트 케이스

### 1. 고객조회 결과 페이지 로드
- **목적**: 고객조회 결과 페이지가 정상적으로 로드되는지 확인
- **조건**: 고객조회 검색을 통해 고객을 선택한 상태
- **단계**:
  1. 고객조회 검색창에 이름, 생년월일, 성별 또는 전화번호 입력
  2. 검색 버튼 클릭
- **예상 결과**: 고객조회 결과 페이지가 로드되고, 보유상품 트리와 상세내역이 표시됨

### 2. 보유상품 트리 구조 확인
- **목적**: 보유상품 트리가 3Depth로 올바르게 표시되는지 확인
- **조건**: 고객조회 결과 페이지에 진입한 상태
- **단계**:
  1. 보유상품 트리 확인
  2. 1Depth, 2Depth, 3Depth가 올바르게 펼쳐지는지 확인
- **예상 결과**: 트리가 3Depth로 표시되며, 2Depth에서 "사용중", "해지" 상태가 표시됨

### 3. 전화번호 검색 기능
- **목적**: 전화번호로 고객 보유상품을 검색할 수 있는지 확인
- **조건**: 고객조회 결과 페이지에 진입한 상태
- **단계**:
  1. 전화번호 입력 후 검색 버튼 클릭
- **예상 결과**: 검색된 전화번호에 해당하는 보유상품만 표시됨

### 4. 상세내역 표시
- **목적**: 트리의 2Depth 및 3Depth 선택 시 상세내역이 올바르게 표시되는지 확인
- **조건**: 고객조회 결과 페이지에 진입한 상태
- **단계**:
  1. 트리의 2Depth 전화번호 선택
  2. 3Depth 요금제 또는 일반부가 선택
- **예상 결과**: 선택한 항목에 대한 상세내역이 표시됨

### 5. 마스킹 해제 기능
- **목적**: 마스킹 해제 권한이 있을 경우 마스킹 해제 기능이 정상 작동하는지 확인
- **조건**: 마스킹 해제 권한이 있는 사용자로 로그인
- **단계**:
  1. 우클릭하여 "마스킹 해제" 선택
  2. 컨펌창에서 확인 클릭
- **예상 결과**: 마스킹이 해제되고, 하단 안내문구가 표시됨

## 백엔드 테스트 케이스

### Positive 케이스

### 1. 고객조회 API 정상 응답
- **목적**: 고객조회 API가 정상적으로 고객 정보를 반환하는지 확인
- **조건**: 유효한 검색 조건(이름, 생년월일, 성별 또는 전화번호) 제공
- **단계**:
  1. API 요청 전송
- **예상 결과**: 고객 정보와 보유상품 리스트가 포함된 JSON 응답 반환

### 2. 보유상품 트리 데이터 정렬
- **목적**: 보유상품 트리가 가입 최신일자 기준으로 내림차순 정렬되는지 확인
- **조건**: 고객조회 API 호출
- **단계**:
  1. API 요청 전송
- **예상 결과**: 보유상품 리스트가 가입 최신일자 기준으로 내림차순 정렬되어 반환

### 3. 상세내역 API 정상 응답
- **목적**: 상세내역 API가 선택된 보유상품의 상세 정보를 반환하는지 확인
- **조건**: 유효한 보유상품 ID 제공
- **단계**:
  1. API 요청 전송
- **예상 결과**: 계약정보, 납부정보, 상세정보가 포함된 JSON 응답 반환

### Negative 케이스

### 1. 잘못된 검색 조건
- **목적**: 잘못된 검색 조건으로 API 호출 시 적절한 오류 메시지가 반환되는지 확인
- **조건**: 잘못된 이름, 생년월일, 성별 또는 전화번호 제공
- **단계**:
  1. API 요청 전송
- **예상 결과**: 오류 코드와 함께 "검색 조건이 잘못되었습니다"라는 메시지 반환

### 2. 권한 없는 마스킹 해제 시도
- **목적**: 마스킹 해제 권한이 없는 사용자가 마스킹 해제를 시도할 때 적절한 오류 메시지가 반환되는지 확인
- **조건**: 마스킹 해제 권한이 없는 사용자로 로그인
- **단계**:
  1. 마스킹 해제 API 요청 전송
- **예상 결과**: 오류 코드와 함께 "권한이 없습니다"라는 메시지 반환

### 3. 비활성화된 보유상품 조회 시도
- **목적**: 비활성화된 보유상품을 조회할 때 적절한 오류 메시지가 반환되는지 확인
- **조건**: 비활성화된 보유상품 ID 제공
- **단계**:
  1. API 요청 전송
- **예상 결과**: 오류 코드와 함께 "비활성화된 상품입니다"라는 메시지 반환
============================================================
```

## 📁 프로젝트 구조

```
jira-smithery/
├── src/
│   └── cli.ts              # 메인 CLI 애플리케이션
├── dist/                   # 컴파일된 JavaScript 파일
├── config.json.example     # 설정 파일 예시
├── run-cli.sh             # 실행 스크립트
├── tsconfig.server.json   # TypeScript 설정
└── package.json           # 프로젝트 의존성
```

## 🔧 설정

### Jira API 토큰 생성
1. [Atlassian 계정 설정](https://id.atlassian.com/manage-profile/security/api-tokens)에서 API 토큰 생성
2. 생성된 토큰을 `config.json`의 `jira.apiToken`에 입력

### OpenAI API 키
1. [OpenAI API 키 페이지](https://platform.openai.com/api-keys)에서 API 키 생성
2. 생성된 키를 `config.json`의 `openai.apiKey`에 입력

## 🐛 문제 해결

### 일반적인 오류

**Jira 인증 실패**
```
❌ 오류: Jira 인증에 실패했습니다. 사용자명과 API 토큰을 확인해주세요.
```
- 사용자명이 이메일 주소인지 확인
- API 토큰이 올바른지 확인

**이슈를 찾을 수 없음**
```
❌ 오류: Jira 이슈를 찾을 수 없습니다: AUT-999
```
- 이슈 키가 올바른지 확인
- 해당 이슈에 접근 권한이 있는지 확인

**OpenAI API 오류**
```
❌ 오류: OpenAI API 호출 실패: Invalid API key
```
- API 키가 올바른지 확인
- API 키에 충분한 크레딧이 있는지 확인

## 📝 라이선스

MIT License

## 🤝 기여

버그 리포트나 기능 제안은 이슈로 등록해주세요.
